# Changelog

主なもののみ

## v1.0.0 (2017-10-6)
- 初版


## v1.1.0 (2017-10-11)
- NGを適用するコメント元が保存されるようになった
- NGを適用するコメント元を複数指定できるようになった
    - 今までのNG設定は消えます
- コメントログの自動スクロールの仕方を変えた
- コメントログのコメントの内容とユーザーをクリップボードにコピーできるようになった
- コメントログのコラムの幅を保存するようになった
    - コラムの順序はまだ保存しません
- コメントログのコメントをダブルクリックでコメント詳細ウィンドウを開くようにした
- 2chのコメント色を設定できるようにした
- コメント投稿をEnter、改行をAlt+Enterに変えた


## v1.2.0 (2017-10-22)
- メインウィンドウの大きさが保存されないのを直した
- 任意のコメント元のコメントをランダム色にできるようになった
    - NG設定から設定します
        - 逆に2ch設定でランダム色にはできなくなった
- ログに表示するコメント数を設定できるようになった
- コメントの表示時刻調整ができるようになった
- 4時リセット対策をした、がテストはしてない


## v1.3.0 (2017-11-5)
- コメントファイルからコメントを読み込めるようになった
- ニコニコ実況で複数行コメントが空白になるのを直した
- ログのコラムの順序が保存されるようになった
- 2chコメント元設定でスレをダブルクリックでも決定できるように直した
- 2chコメント元設定でスレ更新ボタンをつけた
- 複数行コメントをsmallにできるようになった
    - NG設定から設定します
- コメント番号を表示するようにした

## v1.4.0 (2020-12-15)
- .NET Core 3.1に移行
- 5chAPIからレスを取得し表示できるように
- channels.txt等の設定ファイルがないと無言で終了するのを修正
- 5chの自動スレ選択でネットワークIDが不明でもほとんどの場合機能するように
- 5chのレスが団子にならないように遅延して表示するように
- 5chの投稿機能の代わりにスレをブラウザで開けるように
- ニコニコ生放送のコメント表示投稿機能追加
- ニコニコ実況の勢い値の取得をやめる
- コメントログ数を0に設定することで古いコメントの削除を行わないように

## v1.5.0 (2020-12-17)
- ニコニコ生放送で生放送IDをch*********等のエイリアスでも指定できるように
- ニコニコと5chの設定を適用したときに設定値が不正だと入力が元に戻るのを修正
- 複数の種類のコメント元設定ダイアログを使うと落ちたり挙動がおかしくなったりするのを修正
- 設定関係の処理を刷新し、設定ファイルをjsonに変更、保存場所もexeファイルと同フォルダにする
    - 前バージョンの設定はリセットされます

## v1.6.0 (2020-12-18)
- メインウィンドウにタイトルバーもどきを表示および4辺の端でもリサイズできるように
- 2020/12/16からの新ニコニコ実況に対応
- 旧ニコニコ実況と2chHTML関係のUIへの表示をやめる

## v1.6.1 (2020-12-19)
- メインウィンドウのフォントサイズを変更できるように
- メインウィンドウの「設定」タブの次回起動時保存されるべき設定の一部が保存されないのを修正

## v1.6.2 (2020-12-19)
- 「コメント元」タブの「追加↓」「削除↑」ボタンの有効無効状態がおかしくなるのを修正

## 本家からFork

## v1.6.3 (2020-12-20) 
- 非公式過去ログAPIから過去ログを取得する機能を追加
- 自動選択設定の録画時の読み込み時がバグるのを修正

## v1.6.4 (2020-12-21) 
- 最初に過去ログ取得したタイミングより前にシークすると過去ログを取得できなくなるのを修正
- TvTComment本体の設定ファイル読み込みに関するバグを修正。

## v1.6.5 (2020-12-21)
### 本家v1.6.3 (2020-12-21)変更分のマージ
- json設定にて自動選択の録画のほうの設定が視聴時のほうに読み込まれる bugfix
    - noriokun4649 さんありがとうございます
- 前回終了時のメインウィンドウのタブ選択を起動時に復元するように
- メインウィンドウの外周に黒の境界線を追加
- メインウィンドウを初期化が終わるまで最小化しておく
- コメント元自動選択を有効にした時もとから同じコメント元があると二重になるのを修正
- コメント元自動選択をリアルタイム、録画を変えないまま有効→無効→有効とすると働かないのを修正

## v1.6.6 (2020-12-21)
- 非公式過去ログAPIのエラー処理を追加

## v1.6.7 (2020-12-23)
- 新ニコニコ実況の過去ログのスレッドID数字じゃない問題に対応
- 取得仕様とする過去ログの終了時間が現在時刻以降の場合現時刻までにするように変更

## v1.6.8 (2020-12-24)
- 非公式過去ログAPIから過去ログを取得する感覚を1時間から10分へ変更。  
    - 1時間取得だとコメントの多い番組の場合フリーズするらしいので、一応金曜ロードSHOW!のサマーウォーズで検証した結果10分で大丈夫そう。
- 前回の取得時刻と再生時刻からの差分を計算する箇所のミスを修正。
    - 計算結果612秒の場合612にならなきゃいけないのだが、10分12秒なので結果は12になるという糞処理してた。

## v1.6.9 (2020-12-25)
- 10分ごとに過去ログ取得するタイミングで数分コメントが重複するのを修正

## v1.6.10 (2020-12-25)
- 過去ログにdate_usecレコードが必ず入っていると仮定しない。
    - 2017年8月頃より前の過去ログで正常に再生できなかった原因はこれ。

## v1.6.11 (2020-12-27)
- 設定の追加。settings.jsonのNiconicoブロック内に下記の設定が追加されました。
    ```json
    "UnOfficialNiconicoLog": {
        "UnOfficialApiTimeOut": 30,
        "UnOfficialApiGetInterval": 1,
        "UnOfficialApiUri": "https://jikkyo.tsukumijima.net/api/kakolog/jk{jkId}?starttime={start}\u0026endtime={end}\u0026format=xml"
    }
    ```
    | 項目 | 内容・説明  |
    | ------------ | ------------ |
    | UnOfficialApiTimeOut  |  タイムアウトを設定します。デフォルト:30 単位:秒 |
    | UnOfficialApiGetInterval | 過去ログ取得のインターバルを設定します。 デフォルト:1 単位:10分 |
    | UnOfficialApiUri  |  過去ログ取得APIのURIを設定します。 {jkId}は実況ID、{start}は開始のUnixtime、{end}は終了のUnixtimeに置き換えられてます。 |
- User-Agentの設定。